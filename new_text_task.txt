<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Filter</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <style>
        .dropdown-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .dropdown-wrapper {
            width: calc(20% - 10px);
        }
    </style>
</head>
<body>
    <h1>Data Filter</h1>
    <form id="filter-form">
        {% csrf_token %}
        <div class="dropdown-container">
            {% for column in columns %}
            <div class="dropdown-wrapper">
                <label for="{{ column }}">{{ column }}:</label>
                <select name="{{ column }}" id="{{ column }}" multiple>
                    {% for option in options|get_item:column %}
                    <option value="{{ option }}">{{ option }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endfor %}
        </div>
        <button type="submit">Apply Filters</button>
    </form>
    <div id="table-container"></div>

    <script>
        $(document).ready(function() {
            $('select').select2();

            function updateTable(data) {
                let tableHtml = '<table border="1"><thead><tr>';
                for (let col of data.columns) {
                    tableHtml += `<th>${col}</th>`;
                }
                tableHtml += '</tr></thead><tbody>';
                for (let row of data.data) {
                    tableHtml += '<tr>';
                    for (let col of data.columns) {
                        tableHtml += `<td>${row[col]}</td>`;
                    }
                    tableHtml += '</tr>';
                }
                tableHtml += '</tbody></table>';
                $('#table-container').html(tableHtml);
            }

            updateTable({{ data|safe }});

            $('#filter-form').on('submit', function(e) {
                e.preventDefault();
                $.ajax({
                    url: '',
                    type: 'POST',
                    data: $(this).serialize(),
                    success: function(response) {
                        updateTable(response);
                    }
                });
            });
        });
    </script>
</body>
</html>











import pandas as pd
import numpy as np
from django.shortcuts import render
from django.http import JsonResponse

def generate_dataframe():
    np.random.seed(42)
    columns = [f'Col{i}' for i in range(1, 11)]
    data = np.random.randint(1, 100, size=(20, 10))
    return pd.DataFrame(data, columns=columns)

df = generate_dataframe()

def filter_data(request):
    if request.method == 'POST':
        filters = {}
        for col in df.columns:
            selected_values = request.POST.getlist(col)
            if selected_values:
                filters[col] = selected_values

        filtered_df = df
        for col, values in filters.items():
            filtered_df = filtered_df[filtered_df[col].astype(str).isin(values)]

        return JsonResponse({
            'data': filtered_df.to_dict('records'),
            'columns': list(filtered_df.columns)
        })

    context = {
        'columns': list(df.columns),
        'options': {col: sorted(df[col].astype(str).unique().tolist()) for col in df.columns},
        'data': df.to_dict('records'),
    }
    return render(request, 'filter_app/filter.html', context)










Create filter_app/templatetags/custom_filters.py:
from django import template
from django.template.defaultfilters import stringfilter

register = template.Library()

@register.filter(name='get_item')
def get_item(dictionary, key):
    return dictionary.get(key)



from django.urls import path
from . import views

urlpatterns = [
    path('', views.filter_data, name='filter_data'),
]


from django.urls import path
from . import views

urlpatterns = [
    path('', views.filter_data, name='filter_data'),
]

































import pandas as pd
import numpy as np
from django.shortcuts import render

def generate_dataframe():
    np.random.seed(42)
    columns = [f'Col{i}' for i in range(1, 11)]
    data = np.random.randint(1, 100, size=(20, 10))
    return pd.DataFrame(data, columns=columns)

df = generate_dataframe()

def filter_data(request):
    filtered_df = df.copy()

    if request.method == 'POST':
        filters = {}
        for col in df.columns:
            selected_values = request.POST.getlist(col)
            if selected_values:
                filters[col] = selected_values

        for col, values in filters.items():
            filtered_df = filtered_df[filtered_df[col].astype(str).isin(values)]

    context = {
        'columns': list(df.columns),
        'options': {col: sorted(df[col].astype(str).unique().tolist()) for col in df.columns},
        'data': filtered_df.to_dict('records'),
        'selected': {col: request.POST.getlist(col) for col in df.columns} if request.method == 'POST' else {}
    }
    return render(request, 'filter_app/filter.html', context)














<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataframe Dropdowns</title>
    <!-- Include necessary CSS and JavaScript libraries -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <style>
        .dropdown-menu {
            max-height: 200px; /* Adjust max-height as needed */
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Select Columns:</h2>
        <div class="dropdown-scrollable">
            {% for column in columns %}
            <div class="dropdown" style="display: inline-block; margin-right: 10px;">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                    {{ column }}
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 100px;">
                    {% for value in data[column] %}
                    <label class="dropdown-item">
                        <input type="checkbox" value="{{ value }}"> {{ value }}
                    </label>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        <hr>
        <h2>Filtered Data:</h2>
        <div id="filtered-table">
            {{ data|safe }}
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Handle dropdown item selection
            $('.dropdown-item input[type="checkbox"]').change(function() {
                updateFilteredData();
            });

            // Function to update filtered data
            function updateFilteredData() {
                // Get selected values
                var selectedValues = {};
                $('.dropdown-menu').each(function() {
                    var column = $(this).prev('.dropdown-toggle').text().trim();
                    selectedValues[column] = [];
                    $(this).find('input:checked').each(function() {
                        selectedValues[column].push($(this).val());
                    });
                });

                // AJAX call to update filtered data
                $.ajax({
                    type: 'POST',
                    url: '{% url "filter_data" %}',
                    data: {
                        selected_values: JSON.stringify(selectedValues),
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function(response) {
                        $('#filtered-table').html(response);
                    },
                    error: function(xhr, status, error) {
                        console.error('Error:', error);
                    }
                });
            }
        });
    </script>
</body>
</html>











<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataframe Dropdowns</title>
    <!-- Include necessary CSS and JavaScript libraries -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <style>
        .dropdown-menu {
            max-height: 200px; /* Adjust max-height as needed */
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Select Columns:</h2>
        <div class="dropdown-scrollable">
            {% for column in columns %}
            <div class="dropdown" style="display: inline-block; margin-right: 10px;">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                    {{ column }}
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 100px;">
                    {% for value in data[column] %}
                    <label class="dropdown-item">
                        <input type="checkbox" value="{{ value }}"> {{ value }}
                    </label>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        <hr>
        <h2>Filtered Data:</h2>
        <div id="filtered-table">
            <!-- Placeholder for filtered data -->
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Handle dropdown item selection
            $('.dropdown-item input[type="checkbox"]').change(function() {
                updateFilteredData();
            });

            // Function to update filtered data
            function updateFilteredData() {
                // Get selected values
                var selectedValues = {};
                $('.dropdown-menu').each(function() {
                    var column = $(this).prev('.dropdown-toggle').text().trim();
                    selectedValues[column] = [];
                    $(this).find('input:checked').each(function() {
                        selectedValues[column].push($(this).val());
                    });
                });

                // AJAX call to update filtered data
                $.ajax({
                    type: 'POST',
                    url: '/update_filtered_data/',  // Adjust URL based on your Django view
                    data: {
                        selected_values: JSON.stringify(selectedValues),
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function(response) {
                        $('#filtered-table').html(response);
                    },
                    error: function(xhr, status, error) {
                        console.error('Error:', error);
                    }
                });
            }
        });
    </script>
</body>
</html>
